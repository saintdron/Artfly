##Text

<P>Для того чтобы система адекватно выглядела в браузере и поддерживала компонентный подход, она должна быть <I>шаблонно-ориентированной</I>, а не контроллерно-ориентированной. Шаблон определяет:
<ul>
<li>положение страниц в дереве сайта, а также их взаимодействие между собой посредством гиперссылок (в том числе ссылок на изображения);
<li>состав и порядок Блоков, используемых на странице;
<li>используемые данным Шаблоном Компоненты. 
</ul>
<P>Изобразим новую схему взаимодействия элементов компонентного подхода.
<p><img src="comp.gif">
<br><i>Взаимосвязь элементов компонентного подхода</i>
<P>Мы видим, что, как и ожидалось, внимание переключилось с Контроллера на Шаблон. Давайте рассмотрим другие особенности схемы.
<ul>
<li>Один и тот же Шаблон в своей работе может использовать несколько независимых Компонентов. Например, первый Компонент может генерировать меню текущего раздела сайта, второй – блок новостей, а третий – главный текст страницы. Это достаточно естественно: страницы как раз обычно и состоят из разнородных блоков, каждому из которых соответствует свой Компонент.
<li>Шаблон по-прежнему не взаимодействует напрямую с Моделью, а получает данные только от Компонентов. 
<li>С точки зрения пользователя (браузера) Шаблон первичен, Компоненты вторичны и выступают в виде кода, предоставляющего некоторые данные Шаблону.
<li>Пользователь не может напрямую взаимодействовать ни с Компонентами, ни с Моделью. Все, что он "видит", — это страницы, предоставляемые Шаблоном.
<li>Элемент Модель компонентного подхода и элемент Модель MVC идентичны.
</ul>
<P><STRONG><EM>Примечание</EM></STRONG>
<P>К вопросу о первичности Шаблона. Представьте, что вы сидите перед монитором и пытаетесь попасть мышью в полосу прокрутки на окне. С чем вы тогда общаетесь — с окном и линейкой прокрутки, или же с той программой, которая обрабатывает движения курсора, перерисовывает линейку прокрутки и подкачивает данные с диска?.. Иными словами, на интуитивном уровне вы ведь "разговариваете" именно с <I>интерфейсом</I> объекта (Шаблоном), а не с его "внутренностями" (Контроллером или Компонентом), не так ли?.. Так что идея использования Шаблона в качестве первичного элемента вполне естественна.
<P>Но позвольте, довольно сухой теории! Проиллюстрируем, как можно реализовать нашу гостевую книгу с использованием компонентного подхода. Мы приведем код Шаблона книги и ее единственного Компонента. Что касается Модели, то она не меняется, и ее код уже был приведен в <I>листинге &nbsp;50.5</I>.
